<!doctype html>
<html class="no-js" lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>segment-vis</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,700|Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <script src="js/highlight.pack.js"></script>
    <link rel="stylesheet" href="css/main.css">
  </head>
  <body>

  <header>
    <nav>
      <ul>
        <li><a class="icon-github" href="https://github.com/Ircam-RnD/segment-vis">Source on GitHub</a></li>
        <li class="updated"><em>Last updated: 20/June/2014</em></li>
      </ul>
    </nav>
  </header>

  <hr>

  <section>
    <h1 id="segment-visualiser">Segment visualiser</h1>
<p>Use this module to visualise data segments over a shared timeline.<br>The module relies on a <a href="https://github.com/Ircam-RnD/timeLine">timeline</a> instance.</p>
<div class="only-readme">
<h2>Demo</h2>
<p>A woring demo for this module can be found here <a href="https://ircam-rnd.github.io/segment-vis/">here</a></p>
</div>

<div class="timeline"></div>

<h2 id="status">Status</h2>
<p>This library is under heavy development and subject to change.<br>Evert new API breaking change we will be adding snapshots to the repository so you can always fetch a working copy.</p>
<p>For an in depth  explanation on the philosophy and usage of this library please refer to <a href="http://wave.ircam.fr/publications/visual-tools/">this blog post</a>.</p>
<h2 id="usage">Usage</h2>
<h3 id="data">Data</h3>
<p>Will be passed to a timeLine later. In this case a Backbone collection.</p>
<pre><code class="lang-js">var collection = new Backbone.Collection([{
    "begin": "0",
    "duration": "16121",
    "end": "16121",
    "color": "#A9d"
  }, { "begin": "1" …},
  }, { "begin": "3" …},
]);</code></pre>
<h2 id="dataview">DataView</h2>
<p>If your data doesn't match the spected structure you can pass in a dataView that lets the visualizer how to access and manipulate the data.</p>
<pre><code class="lang-js">// Sample dataView tells us how to access the data
var view = {
  // tell d3 which is our key for sorting
  sortIndex: function(d) {
    return d.get('begin');
  },
   // how to retrieve or set the value used as the start of the segment
  start: function(d, v) {
    // no value, we retrieve
    if(!v) return +d.get('begin');
    // yesvalue we set :)
    d.set('begin', v);
  },
  // how to retrieve or set the value used as the duration of the segment
  duration: function(d, v) {
    if(!v) return +d.get('duration');
    d.set('duration', v);
  },
  // how to retrieve or set the value used for the color of the segment
  color: function(d, v) {
    if(!v) return d.get('color');
    d.set('color', v);
  }
};</code></pre>
<h3 id="creating-the-visualiser-layer">Creating the Visualiser layer</h3>
<pre><code class="lang-js">var seg = segmentVis()
  .data(collection.models)
  .dataView(view)
  .name('segments')  
  .opacity(0.5);</code></pre>
<h3 id="creating-the-timeline-layout">Creating the timeLine layout</h3>
<pre><code class="lang-js">var graph = timeLine()
  .width(800)
  .height(150)
  .xDomain([0, 100]);</code></pre>
<h3 id="adding-the-visualiser-layer-and-drawing-everything">Adding the Visualiser layer and drawing everything</h3>
<pre><code class="lang-js">// we add layers like this
graph.layer(seg);
// we pass in the drawing method from our timeline object
d3.select('.timeline').call(graph.draw);</code></pre>
<div class="only-readme">
<h2>License</h2>
<p>This module is released under the <a href="http://opensource.org/licenses/BSD-3-Clause">BSD-3-Clause license</a>.</p>

<h2>Acknowledgments</h2>
<p>This code is part of the <a href="http://wave.ircam.fr">WAVE project</a>, funded by ANR (The French National Research Agency), <em>ContInt</em> program, 2012-2015.</p>
</div>

<script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.8/d3.min.js"></script>
<script src="//rawgit.com/ircam-rnd/segment-vis/master/segment-vis.min.js"></script>
<script src="//rawgit.com/ircam-rnd/timeLine/master/timeLine.min.js"></script>
<script>
  var data = [{
                  "start": 0,
                  "duration": 4,
                  "color": "#414FBA"
                }, {
                  "start": 5,
                  "duration": 7,
                  "color": "#2A2E68"
                }, {
                  "start": 18,
                  "duration": 9,
                  "color": "#5A281E"
                }, {
                  "start": 30,
                  "duration": 7,
                  "color": "#BE7C7A"
                }, {
                  "start": 16,
                  "duration": 6,
                  "color": "#BE7C7A"
                }, {
                  "start": 8,
                  "duration": 3,
                  "color": "#2A2E68"
                }, {
                  "start": 1,
                  "duration": 4,
                  "color": "#C52599"
                }, {
                  "start": 63,
                  "duration": 9,
                  "color": "#CA56F4"
                }, {
                  "start": 90,
                  "duration": 9,
                  "color": "#5A281E"
                }, {
                  "start": 20,
                  "duration": 6,
                  "color": "#CA56F4"
                }];

  document.addEventListener('DOMContentLoaded', function() {

    document.querySelector('.timeline').innerHTML = '';

    // Timeline
    // --------
    var graph = timeLine()
      .width(750)
      .height(150)
      .xDomain([0, 100]);

    // segments layer
    // --------------
    graph.layer(
      segmentVis()
      .data(data)
      .name('segments')
      .opacity(0.5));

    d3.select('.timeline').call(graph.draw);

    });
</script>

  </section>

  <hr>

  <footer>
    This code is part of the <a href="http://wave.ircam.fr">WAVE project</a><br>
    funded by ANR (The French National Research Agency)<br>
    ContInt program<br>
    2012-2015
  </footer>
  <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>