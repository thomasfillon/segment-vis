<!doctype html>
<html class="no-js" lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>segment-vis</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,700|Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.0/highlight.min.js"></script>
    <link rel="stylesheet" href="css/main.css">
  </head>
  <body>

  <header>
    <nav>
      <ul>
        <li><a class="icon-github" href="https://github.com/Ircam-RnD/segment-vis">Source on GitHub</a></li>
        <li class="updated"><em>Last updated: 30/June/2014</em></li>
      </ul>
    </nav>
  </header>
  
  <hr>

  <section>
    <h2 id="segment-editor">Segment editor</h2>
<blockquote>
<p>Segment visualiser component</p>
</blockquote>
<p>Use this module to visualise data segments over a shared timeline.<br>The module relies on a <a href="https://github.com/Ircam-RnD/timeLine">timeline</a> instance.</p>
<h3 id="status">Status</h3>
<p>This library is under heavy development and subject to change.<br>Evert new API breaking change we will be adding snapshots to the repository so you can always fetch a working copy.</p>
<p>For an in depth  explanation on the philosophy and usage of this library please refer to <a href="http://wave.ircam.fr/publications/visual-tools/">this blog post</a>.</p>

    <h3 id="demo">Demo</h3>
<div class="timeline"></div>

<p>This demo shows a simple segmented data visualization.</p>
<script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.8/d3.min.js"></script>
<script src="//rawgit.com/ircam-rnd/segment-vis/master/segment-vis.min.js"></script>
<script src="//rawgit.com/ircam-rnd/timeline/master/timeline.js"></script>
<script>
  var data = [{
                  "start": 0,
                  "duration": 4,
                  "color": "#414FBA"
                }, {
                  "start": 5,
                  "duration": 7,
                  "color": "#2A2E68"
                }, {
                  "start": 18,
                  "duration": 9,
                  "color": "#5A281E"
                }, {
                  "start": 30,
                  "duration": 7,
                  "color": "#BE7C7A"
                }, {
                  "start": 16,
                  "duration": 6,
                  "color": "#BE7C7A"
                }, {
                  "start": 8,
                  "duration": 3,
                  "color": "#2A2E68"
                }, {
                  "start": 1,
                  "duration": 4,
                  "color": "#C52599"
                }, {
                  "start": 63,
                  "duration": 9,
                  "color": "#CA56F4"
                }, {
                  "start": 90,
                  "duration": 9,
                  "color": "#5A281E"
                }, {
                  "start": 20,
                  "duration": 6,
                  "color": "#CA56F4"
                }];

  document.addEventListener('DOMContentLoaded', function() {

    document.querySelector('.timeline').innerHTML = '';

    // Timeline
    // --------
    var graph = timeline()
      .width(750)
      .height(150)
      .xDomain([0, 100]);

    // segments layer
    // --------------
    graph.layer(
      segmentVis()
      .data(data)
      .name('segments')
      .opacity(0.5));

    d3.select('.timeline').call(graph.draw);

    });
</script>
    <h3 id="usage">Usage</h3>
<h4 id="data">Data</h4>
<p>Will be passed to a timeLine later. In this case a Backbone collection.</p>
<pre><code class="lang-js">var collection = new Backbone.Collection([{
    &quot;begin&quot;: &quot;0&quot;,
    &quot;duration&quot;: &quot;16121&quot;,
    &quot;end&quot;: &quot;16121&quot;,
    &quot;color&quot;: &quot;#A9d&quot;
  }, { &quot;begin&quot;: &quot;1&quot; …},
  }, { &quot;begin&quot;: &quot;3&quot; …},
]);
</code></pre>
<h3 id="dataview">DataView</h3>
<p>If your data doesn&#39;t match the expected structure you can pass in a dataView that lets the visualizer how to access and manipulate the data.</p>
<pre><code class="lang-js">// Sample dataView tells us how to access the data
var view = {
  // tell d3 which is our key for sorting
  sortIndex: function(d) {
    return d.get(&#39;begin&#39;);
  },
   // how to retrieve or set the value used as the start of the segment
  start: function(d, v) {
    // no value, we retrieve
    if(!v) return +d.get(&#39;begin&#39;);
    // yesvalue we set :)
    d.set(&#39;begin&#39;, v);
  },
  // how to retrieve or set the value used as the duration of the segment
  duration: function(d, v) {
    if(!v) return +d.get(&#39;duration&#39;);
    d.set(&#39;duration&#39;, v);
  },
  // how to retrieve or set the value used for the color of the segment
  color: function(d, v) {
    if(!v) return d.get(&#39;color&#39;);
    d.set(&#39;color&#39;, v);
  }
};
</code></pre>
<h4 id="creating-the-visualiser-layer">Creating the Visualiser layer</h4>
<pre><code class="lang-js">var seg = segmentVis()
  .data(collection.models)
  .dataView(view)
  .name(&#39;segments&#39;)  
  .opacity(0.5);
</code></pre>
<h4 id="creating-the-timeline-layout">Creating the timeLine layout</h4>
<pre><code class="lang-js">var graph = timeLine()
  .width(800)
  .height(150)
  .xDomain([0, 100]);
</code></pre>

  </section>

  <hr>

  <footer>
    <p>This code is part of the <a href="http://wave.ircam.fr">WAVE project</a>,<br>funded by ANR (The French National Research Agency),<br><em>ContInt</em> program,<br>2012-2015.</p>

  </footer>
  <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
